<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Twin – Your Talking Digital Clone</title>
  <link href="styles.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white font-sans">

  <!-- Hero Section -->
  <header class="text-center py-12">
    <img src="assets/logo.png" alt="AI Twin Logo" class="mx-auto w-24 mb-4">
    <h1 class="text-4xl font-bold">AI Twin</h1>
    <p class="text-lg mt-2 text-gray-300">Let your AI clone speak, sell, and shine – in 4K.</p>
    <a href="#generate" class="mt-6 inline-block bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded text-white font-semibold">Get Started</a>
  </header>

  <!-- Welcome Video -->
  <section class="max-w-3xl mx-auto px-4 mb-10">
    <video controls autoplay muted class="w-full rounded-xl shadow-xl">
      <source src="assets/welcome.mp4" type="video/mp4">
      Your browser does not support video.
    </video>
  </section>

  <!-- How It Works -->
  <section class="max-w-4xl mx-auto px-4 py-6">
    <h2 class="text-2xl font-bold mb-4 text-center">How It Works</h2>
    <div class="grid md:grid-cols-3 gap-6 text-center">
      <div><p>📸 Upload Your Face</p></div>
      <div><p>📝 Enter What You Want to Say</p></div>
      <div><p>🎬 Generate Your AI Video</p></div>
    </div>
  </section>

  <!-- AI Video Generator -->
  <section id="generate" class="max-w-md mx-auto px-4 py-10 bg-gray-800 rounded-xl shadow-xl">
    <h2 class="text-xl font-bold mb-4 text-center">Create Your AI Twin</h2>
    <form id="aiTwinForm" class="space-y-4">
      <div>
        <label>Upload Your Face Photo</label>
        <input type="file" id="photoInput" accept="image/*" required class="w-full p-2 bg-gray-700 border border-gray-600 rounded">
      </div>
      <div>
        <label>Your Message</label>
        <textarea id="scriptInput" rows="4" placeholder="Hi, I’m your AI version!" required class="w-full p-2 bg-gray-700 border border-gray-600 rounded"></textarea>
      </div>
      <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded">🎬 Generate Video</button>
    </form>
    <div id="loading" class="text-yellow-300 mt-4 hidden">Generating your 4K twin...</div>
    <div id="resultSection" class="mt-4 hidden">
      <video id="aiVideo" controls class="w-full rounded mb-2"></video>
      <a id="downloadBtn" href="#" download="AI_Twin.mp4" class="block text-center bg-blue-600 hover:bg-blue-700 py-2 rounded">⬇ Download Video</a>
    </div>
  </section>

  <!-- Pricing -->
  <section class="max-w-4xl mx-auto px-4 py-12 text-center">
    <h2 class="text-2xl font-bold mb-6">Pricing Plans</h2>
    <div class="grid md:grid-cols-3 gap-6">
      <div class="bg-gray-800 p-6 rounded">
        <h3 class="text-xl font-semibold">Free</h3>
        <p class="text-gray-400 mt-2">2 videos · 720p</p>
        <p class="mt-4 font-bold text-lg">Free</p>
      </div>
      <div class="bg-gray-800 p-6 rounded border-2 border-green-500">
        <h3 class="text-xl font-semibold text-green-400">Pro</h3>
        <p class="text-gray-400 mt-2">10 videos · 1080p</p>
        <p class="mt-4 font-bold text-lg">$9</p>
        <a href="https://pay.yoco.com/your-pro-link" class="mt-3 inline-block bg-green-600 px-4 py-2 rounded text-white">Buy Now</a>
      </div>
      <div class="bg-gray-800 p-6 rounded">
        <h3 class="text-xl font-semibold">Unlimited</h3>
        <p class="text-gray-400 mt-2">Unlimited · 4K videos</p>
        <p class="mt-4 font-bold text-lg">$29</p>
        <a href="https://pay.yoco.com/your-unlimited-link" class="mt-3 inline-block bg-blue-600 px-4 py-2 rounded text-white">Buy Now</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center py-6 text-gray-500 text-sm">
    &copy; 2025 AI Twin. Built with love on GitHub + Netlify.
  </footer>

  <!-- Script -->
  <script>
    const form = document.getElementById("aiTwinForm");
    const photoInput = document.getElementById("photoInput");
    const scriptInput = document.getElementById("scriptInput");
    const loading = document.getElementById("loading");
    const resultSection = document.getElementById("resultSection");
    const aiVideo = document.getElementById("aiVideo");
    const downloadBtn = document.getElementById("downloadBtn");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      loading.classList.remove("hidden");
      resultSection.classList.add("hidden");

      const file = photoInput.files[0];
      const script = scriptInput.value;

      const reader = new FileReader();
      reader.onload = async () => {
        const base64Image = reader.result.split(',')[1];
        try {
          const res = await fetch("/.netlify/functions/generate-video", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ image: base64Image, script })
          });
          const data = await res.json();
          if (data.videoUrl) {
            aiVideo.src = data.videoUrl;
            downloadBtn.href = data.videoUrl;
            resultSection.classList.remove("hidden");
          } else {
            alert("❌ Failed to generate video.");
          }
        } catch (err) {
          alert("⚠️ Error: " + err.message);
        } finally {
          loading.classList.add("hidden");
        }
      };
      reader.readAsDataURL(file);
    });
  </script>

</body>
</html>
